/*

 FullCalendar v1.5.4
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Tue Feb 12 16:13:45 2013 +0000

*/
(function(m,na){function wb(a){m.extend(true,Ya,a)}function Xb(a,b,f){function d(p){if(k){t();n();ba();J(p)}else g()}function g(){u=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");k=m("<div class='fc-content' style='position:relative'/>").prependTo(a);W=new Yb(q,b);(V=W.render())&&a.prepend(V);v(b.defaultView);m(window).resize(ha);w()||e()}function e(){setTimeout(function(){!h.start&&w()&&J()},0)}function o(){m(window).unbind("resize",ha);W.destroy();
k.remove();a.removeClass("fc fc-rtl ui-widget")}function r(){return S.offsetWidth!==0}function w(){return m("body")[0].offsetWidth!==0}function v(p){if(!h||p!=h.name){X++;ma();var i=h,x;if(i){(i.beforeHide||xb)();Za(k,k.height());i.element.hide()}else Za(k,1);k.css("overflow","hidden");if(h=N[p])h.element.show();else h=N[p]=new Ja[p](x=K=m("<div class='fc-view fc-view-"+p+"' style='position:absolute'/>").appendTo(k),q);i&&W.deactivateButton(i.name);W.activateButton(p);J();k.css("overflow","");i&&
Za(k,1);x||(h.afterShow||xb)();X--}}function J(p){if(r()){X++;ma();F===na&&t();var i=false;if(!h.start||p||$<h.start||$>=h.end){h.render($,p||0);ca(true);i=true}else if(h.sizeDirty){h.clearEvents();ca();i=true}else if(h.eventsDirty){h.clearEvents();i=true}h.sizeDirty=false;h.eventsDirty=false;da(i);oa();z=a.outerWidth();W.updateTitle(h.title);X--;h.trigger("viewDisplay",S);h.setWidth(k.width())}}function L(){n();if(r()){t();ca();ma();h.clearEvents();h.renderEvents(ja);h.sizeDirty=false}}function n(){m.each(N,
function(p,i){i.sizeDirty=true})}function t(){F=b.contentHeight?b.contentHeight:b.height?b.height-(V?V.height():0)-Sa(k):Math.round(k.width()/Math.max(b.aspectRatio,0.5))}function ca(p){X++;h.setHeight(F,p);if(K){K.css("position","relative");K=null}h.setWidth(k.width(),p);X--}function ha(){if(!X)if(h.start){var p=++Y;setTimeout(function(){if(p==Y&&!X&&r())if(z!=(z=a.outerWidth())){X++;L();h.trigger("windowResize",S);X--}},200)}else e()}function da(p){if(!b.lazyFetching||P(h.visStart,h.visEnd))ra();
else p&&pa()}function oa(){ga()}function ra(){Q(h.visStart,h.visEnd)}function ga(){B()}function ia(p){ja=p;pa()}function qa(p){ka=p;U()}function ua(p){pa(p)}function pa(p){ba();if(r()){h.clearEvents();h.renderEvents(ja,p);h.eventsDirty=false}}function U(){if(r()){h.clearSessions();h.renderSessions(ka)}}function ba(){m.each(N,function(p,i){i.eventsDirty=true})}function la(p,i,x){h.select(p,i,x===na?true:x)}function ma(){h&&h.unselect()}function D(){J(-1)}function s(){J(1)}function G(){gb($,-1);J()}
function c(){gb($,1);J()}function A(){$=new Date;J()}function E(p,i,x){if(p instanceof Date)$=H(p);else yb($,p,i,x);J()}function R(p,i,x){p!==na&&gb($,p);i!==na&&hb($,i);x!==na&&aa($,x);J()}function ta(){return H($)}function za(){return h}function I(p,i){if(i===na)return b[p];if(p=="height"||p=="contentHeight"||p=="aspectRatio"){b[p]=i;L()}}function l(p,i){if(b[p])return b[p].apply(i||S,Array.prototype.slice.call(arguments,2))}var q=this;q.options=b;q.render=d;q.destroy=o;q.refetchEvents=ra;q.reportEvents=
ia;q.reportEventChange=ua;q.rerenderEvents=pa;q.refetchSessions=ga;q.reportSessions=qa;q.rerenderSessions=U;q.changeView=v;q.select=la;q.unselect=ma;q.prev=D;q.next=s;q.prevYear=G;q.nextYear=c;q.today=A;q.gotoDate=E;q.incrementDate=R;q.formatDate=function(p,i){return Ka(p,i,b)};q.formatDates=function(p,i,x){return ib(p,i,x,b)};q.getDate=ta;q.getView=za;q.option=I;q.trigger=l;Zb.call(q,b,f);var P=q.isFetchNeeded,Q=q.fetchEvents;$b.call(q,b,b.sessions);var B=q.fetchSessions,S=a[0],W,V,k,u,h,N={},z,
F,K,Y=0,X=0,$=new Date,ja=[],ka=[],fa;yb($,b.year,b.month,b.date);b.droppable&&m(document).bind("dragstart",function(p,i){var x=p.target,M=m(x);if(!M.parents(".fc").length){var T=b.dropAccept;if(m.isFunction(T)?T.call(x,M):M.is(T)){fa=x;h.dragStart(fa,p,i)}}}).bind("dragstop",function(p,i){if(fa){h.dragStop(fa,p,i);fa=null}})}function Yb(a,b){function f(){n=b.theme?"ui":"fc";if(b.header)return L=m("<table class='fc-header' style='width:100%'/>").append(m("<tr/>").append(g("left")).append(g("center")).append(g("right")))}
function d(){L.remove()}function g(t){var ca=m("<td class='fc-header-"+t+"'/>");(t=b.header[t])&&m.each(t.split(" "),function(ha){ha>0&&ca.append("<span class='fc-header-space'/>");var da;m.each(this.split(","),function(oa,ra){if(ra=="title"){ca.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");da&&da.addClass(n+"-corner-right");da=null}else{var ga;if(a[ra])ga=a[ra];else if(Ja[ra])ga=function(){qa.removeClass(n+"-state-hover");a.changeView(ra)};if(ga){oa=b.theme?jb(b.buttonIcons,ra):
null;var ia=jb(b.buttonText,ra),qa=m("<span class='fc-button fc-button-"+ra+" "+n+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(oa?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+oa+"'/></span>":ia)+"</span><span class='fc-button-effect'><span></span></span></span></span>");if(qa){qa.click(function(){qa.hasClass(n+"-state-disabled")||ga()}).mousedown(function(){qa.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-down")}).mouseup(function(){qa.removeClass(n+
"-state-down")}).hover(function(){qa.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-hover")},function(){qa.removeClass(n+"-state-hover").removeClass(n+"-state-down")}).appendTo(ca);da||qa.addClass(n+"-corner-left");da=qa}}}});da&&da.addClass(n+"-corner-right")});return ca}function e(t){L.find("h2").html(t)}function o(t){L.find("span.fc-button-"+t).addClass(n+"-state-active")}function r(t){L.find("span.fc-button-"+t).removeClass(n+"-state-active")}function w(t){L.find("span.fc-button-"+
t).addClass(n+"-state-disabled")}function v(t){L.find("span.fc-button-"+t).removeClass(n+"-state-disabled")}var J=this;J.render=f;J.destroy=d;J.updateTitle=e;J.activateButton=o;J.deactivateButton=r;J.disableButton=w;J.enableButton=v;var L=m([]),n}function Zb(a,b){function f(c,A){return!ba||c<ba||A>la}function d(c,A){ba=c;la=A;G=[];c=++ma;D=A=U.length;for(var E=0;E<A;E++)g(U[E],c)}function g(c,A){e(c,function(E){if(A==ma){if(E){for(var R=0;R<E.length;R++){E[R].source=c;ha(E[R])}G=G.concat(E)}D--;D||
ua(G)}})}function e(c,A){var E,R=Ba.sourceFetchers,ta;for(E=0;E<R.length;E++){ta=R[E](c,ba,la,A);if(ta===true)return;else if(typeof ta=="object"){e(ta,A);return}}if(E=c.events)if(m.isFunction(E)){t();E(H(ba),H(la),function(q){A(q);ca()})}else m.isArray(E)?A(E):A();else if(c.url){var za=c.success,I=c.error,l=c.complete;E=m.extend({},c.data||{});R=Ta(c.startParam,a.startParam);ta=Ta(c.endParam,a.endParam);if(R)E[R]=Math.round(+ba/1E3);if(ta)E[ta]=Math.round(+la/1E3);t();m.ajax(m.extend({},ac,c,{data:E,
success:function(q){q=q||[];var P=$a(za,this,arguments);if(m.isArray(P))q=P;A(q)},error:function(){$a(I,this,arguments);A()},complete:function(){$a(l,this,arguments);ca()}}))}else A()}function o(c){if(c=r(c)){D++;g(c,ma)}}function r(c){if(m.isFunction(c)||m.isArray(c))c={events:c};else if(typeof c=="string")c={url:c};if(typeof c=="object"){da(c);U.push(c);return c}}function w(c){U=m.grep(U,function(A){return!oa(A,c)});G=m.grep(G,function(A){return!oa(A.source,c)});ua(G)}function v(c){var A,E=G.length,
R,ta=qa().defaultEventEnd,za=c.start-c._start,I=c.end?c.end-(c._end||ta(c)):0;for(A=0;A<E;A++){R=G[A];if(R._id==c._id&&R!=c){R.start=new Date(+R.start+za);R.end=c.end?R.end?new Date(+R.end+I):new Date(+ta(R)+I):null;R.title=c.title;R.url=c.url;R.allDay=c.allDay;R.className=c.className;R.editable=c.editable;R.color=c.color;R.backgroudColor=c.backgroudColor;R.borderColor=c.borderColor;R.textColor=c.textColor;ha(R)}}ha(c);ua(G)}function J(c,A){ha(c);if(!c.source){if(A){pa.events.push(c);c.source=pa}G.push(c)}ua(G)}
function L(c){if(c){if(!m.isFunction(c)){var A=c+"";c=function(R){return R._id==A}}G=m.grep(G,c,true);for(E=0;E<U.length;E++)if(m.isArray(U[E].events))U[E].events=m.grep(U[E].events,c,true)}else{G=[];for(var E=0;E<U.length;E++)if(m.isArray(U[E].events))U[E].events=[]}ua(G)}function n(c){if(m.isFunction(c))return m.grep(G,c);else if(c){c+="";return m.grep(G,function(A){return A._id==c})}return G}function t(){s++||ia("loading",null,true)}function ca(){--s||ia("loading",null,false)}function ha(c){var A=
c.source||{},E=Ta(A.ignoreTimezone,a.ignoreTimezone);c._id=c._id||(c.id===na?"_fc"+bc++:c.id+"");if(c.date){if(!c.start)c.start=c.date;delete c.date}c._start=H(c.start=ab(c.start,E));c.end=ab(c.end,E);if(c.end&&c.end<=c.start)c.end=null;c._end=c.end?H(c.end):null;if(c.allDay===na)c.allDay=Ta(A.allDayDefault,a.allDayDefault);if(c.className){if(typeof c.className=="string")c.className=c.className.split(/\s+/)}else c.className=[]}function da(c){if(c.className){if(typeof c.className=="string")c.className=
c.className.split(/\s+/)}else c.className=[];for(var A=Ba.sourceNormalizers,E=0;E<A.length;E++)A[E](c)}function oa(c,A){return c&&A&&ra(c)==ra(A)}function ra(c){return(typeof c=="object"?c.events||c.url:"")||c}var ga=this;ga.isFetchNeeded=f;ga.fetchEvents=d;ga.addEventSource=o;ga.removeEventSource=w;ga.updateEvent=v;ga.renderEvent=J;ga.removeEvents=L;ga.clientEvents=n;ga.normalizeEvent=ha;var ia=ga.trigger,qa=ga.getView,ua=ga.reportEvents,pa={events:[]},U=[pa],ba,la,ma=0,D=0,s=0,G=[];for(ga=0;ga<
b.length;ga++)r(b[ga])}function $b(a,b){function f(){if(g)if(m.isFunction(g))d(g());else m.isArray(g)?d(g):d([]);else d([])}a=this;a.fetchSessions=f;var d=a.reportSessions,g=b||[]}function gb(a,b,f){a.setFullYear(a.getFullYear()+b);f||La(a);return a}function hb(a,b,f){if(+a){b=a.getMonth()+b;var d=H(a);d.setDate(1);d.setMonth(b);a.setMonth(b);for(f||La(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(a<d?1:-1))}return a}function aa(a,b,f){if(+a){b=a.getDate()+b;var d=H(a);d.setHours(9);d.setDate(b);
a.setDate(b);f||La(a);kb(a,d)}return a}function kb(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*cc)}function ya(a,b){a.setMinutes(a.getMinutes()+b);return a}function La(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function H(a,b){if(b)return La(new Date(+a));return new Date(+a)}function dc(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function Fa(a,b,f){for(b=b||1;!a.getDay()||f&&a.getDay()==1||!f&&a.getDay()==6;)aa(a,b);
return a}function Ca(a,b){return Math.round((H(a,true)-H(b,true))/zb)}function yb(a,b,f,d){if(b!==na&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(f!==na&&f!=a.getMonth()){a.setDate(1);a.setMonth(f)}d!==na&&a.setDate(d)}function ab(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+(\.\d+)?$/))return new Date(parseFloat(a)*1E3);if(b===na)b=true;return Ab(a,b)||(a?new Date(a):null)}return null}function Ab(a,
b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!a)return null;var f=new Date(a[1],0,1);if(b||!a[13]){b=new Date(a[1],0,1,9,0);if(a[3]){f.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){f.setDate(a[5]);b.setDate(a[5])}kb(f,b);a[7]&&f.setHours(a[7]);a[8]&&f.setMinutes(a[8]);a[10]&&f.setSeconds(a[10]);a[12]&&f.setMilliseconds(Number("0."+a[12])*1E3);kb(f,b)}else{f.setUTCFullYear(a[1],a[3]?a[3]-1:0,
a[5]||1);f.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?Number("0."+a[12])*1E3:0);if(a[14]){b=Number(a[16])*60+(a[18]?Number(a[18]):0);b*=a[15]=="-"?1:-1;f=new Date(+f+b*60*1E3)}}return f}function lb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2],10):0)}}function Ka(a,b,f){return ib(a,null,b,f)}
function ib(a,b,f,d){d=d||Ya;var g=a,e=b,o,r=f.length,w,v,J,L="";for(o=0;o<r;o++){w=f.charAt(o);if(w=="'")for(v=o+1;v<r;v++){if(f.charAt(v)=="'"){if(g){L+=v==o+1?"'":f.substring(o+1,v);o=v}break}}else if(w=="(")for(v=o+1;v<r;v++){if(f.charAt(v)==")"){o=Ka(g,f.substring(o+1,v),d);if(parseInt(o.replace(/\D/,""),10))L+=o;o=v;break}}else if(w=="[")for(v=o+1;v<r;v++){if(f.charAt(v)=="]"){w=f.substring(o+1,v);o=Ka(g,w,d);if(o!=Ka(e,w,d))L+=o;o=v;break}}else if(w=="{"){g=b;e=a}else if(w=="}"){g=a;e=b}else{for(v=
r;v>o;v--)if(J=ec[f.substring(o,v)]){if(g)L+=J(g,d);o=v-1;break}if(v==o)if(g)L+=w}}return L}function Ua(a){return a.end?fc(a.end,a.allDay):aa(H(a.start),1)}function fc(a,b){a=H(a);return b||a.getHours()||a.getMinutes()?aa(a,1):La(a)}function gc(a,b){return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Bb(a,b){return a.end>b.start&&a.start<b.end}function mb(a,b,f,d){var g=[],e,o=a.length,r,w,v,J,L;for(e=0;e<o;e++){r=a[e];w=r.start;v=b[e];if(v>f&&w<d){if(w<f){w=H(f);J=false}else{w=
w;J=true}if(v>d){v=H(d);L=false}else{v=v;L=true}g.push({event:r,start:w,end:v,isStart:J,isEnd:L,msLength:v-w})}}return g.sort(gc)}function nb(a){var b=[],f,d=a.length,g,e,o,r;for(f=0;f<d;f++){g=a[f];for(e=0;;){o=false;if(b[e])for(r=0;r<b[e].length;r++)if(Bb(b[e][r],g)){o=true;break}if(o)e++;else break}if(b[e])b[e].push(g);else b[e]=[g]}return b}function Cb(a,b,f){a.unbind("mouseover").mouseover(function(d){for(var g=d.target,e;g!=this;){e=g;g=g.parentNode}if((g=e._fci)!==na){e._fci=na;e=b[g];f(e.event,
e.element,e);m(d.target).trigger(d)}d.stopPropagation()})}function Va(a,b,f){for(var d=0,g;d<a.length;d++){g=m(a[d]);g.width(Math.max(0,b-ob(g,f)))}}function Db(a,b,f){for(var d=0,g;d<a.length;d++){g=m(a[d]);g.height(Math.max(0,b-Sa(g,f)))}}function ob(a,b){return hc(a)+ic(a)+(b?jc(a):0)}function hc(a){return(parseFloat(m.css(a[0],"paddingLeft",true))||0)+(parseFloat(m.css(a[0],"paddingRight",true))||0)}function jc(a){return(parseFloat(m.css(a[0],"marginLeft",true))||0)+(parseFloat(m.css(a[0],"marginRight",
true))||0)}function ic(a){return(parseFloat(m.css(a[0],"borderLeftWidth",true))||0)+(parseFloat(m.css(a[0],"borderRightWidth",true))||0)}function Sa(a,b){return kc(a)+lc(a)+(b?Eb(a):0)}function kc(a){return(parseFloat(m.css(a[0],"paddingTop",true))||0)+(parseFloat(m.css(a[0],"paddingBottom",true))||0)}function Eb(a){return(parseFloat(m.css(a[0],"marginTop",true))||0)+(parseFloat(m.css(a[0],"marginBottom",true))||0)}function lc(a){return(parseFloat(m.css(a[0],"borderTopWidth",true))||0)+(parseFloat(m.css(a[0],
"borderBottomWidth",true))||0)}function Za(a,b){b=typeof b=="number"?b+"px":b;a.each(function(f,d){d.style.cssText+=";min-height:"+b+";_height:"+b})}function xb(){}function Fb(a,b){return a-b}function Gb(a){return Math.max.apply(Math,a)}function Pa(a){return(a<10?"0":"")+a}function jb(a,b){if(a[b]!==na)return a[b];b=b.split(/(?=[A-Z])/);for(var f=b.length-1,d;f>=0;f--){d=a[b[f].toLowerCase()];if(d!==na)return d}return a[""]}function Qa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,
"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Hb(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function pb(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function bb(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function qb(a,b){a.each(function(f,
d){d.className=d.className.replace(/^fc-\w*/,"fc-"+mc[b.getDay()])})}function Ib(a,b){var f=a.source||{},d=a.color,g=f.color,e=b("eventColor"),o=a.backgroundColor||d||f.backgroundColor||g||b("eventBackgroundColor")||e;d=a.borderColor||d||f.borderColor||g||b("eventBorderColor")||e;a=a.textColor||f.textColor||b("eventTextColor");b=[];o&&b.push("background-color:"+o);d&&b.push("border-color:"+d);a&&b.push("color:"+a);return b.join(";")}function $a(a,b,f){if(m.isFunction(a))a=[a];if(a){var d,g;for(d=
0;d<a.length;d++)g=a[d].apply(b,f)||g;return g}}function Ta(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==na)return arguments[a]}function nc(a,b){function f(r,w){if(w){hb(r,w);r.setDate(1)}r=H(r,true);r.setDate(1);w=hb(H(r),1);var v=H(r),J=H(w),L=g("firstDay"),n=g("weekends")?0:1;if(n){Fa(v);Fa(J,-1,true)}aa(v,-((v.getDay()-Math.max(L,n)+7)%7));aa(J,(7-J.getDay()+Math.max(L,n))%7);L=Math.round((J-v)/(zb*7));if(g("weekMode")=="fixed"){aa(J,(6-L)*7);L=6}d.title=o(r,g("titleFormat"));d.start=
r;d.end=w;d.visStart=v;d.visEnd=J;e(6,L,n?5:7,true)}var d=this;d.render=f;rb.call(d,a,b,"month");var g=d.opt,e=d.renderBasic,o=b.formatDate}function oc(a,b){function f(r,w){w&&aa(r,w*7);r=aa(H(r),-((r.getDay()-g("firstDay")+7)%7));w=aa(H(r),7);var v=H(r),J=H(w),L=g("weekends");if(!L){Fa(v);Fa(J,-1,true)}d.title=o(v,aa(H(J),-1),g("titleFormat"));d.start=r;d.end=w;d.visStart=v;d.visEnd=J;e(1,1,L?7:5,false)}var d=this;d.render=f;rb.call(d,a,b,"basicWeek");var g=d.opt,e=d.renderBasic,o=b.formatDates}
function pc(a,b){function f(r,w){if(w){aa(r,w);g("weekends")||Fa(r,w<0?-1:1)}d.title=o(r,g("titleFormat"));d.start=d.visStart=H(r,true);d.end=d.visEnd=aa(H(d.start),1);e(1,1,1,false)}var d=this;d.render=f;rb.call(d,a,b,"basicDay");var g=d.opt,e=d.renderBasic,o=b.formatDate}function rb(a,b,f){function d(i,x,M,T){h=x;N=M;g();(x=!q)?e(i,T):A();o(x)}function g(){if(Y=G("isRTL")){X=-1;$=N-1}else{X=1;$=0}ja=G("firstDay");ka=G("weekends")?0:1;fa=G("theme")?"ui":"fc";p=G("columnFormat")}function e(i,x){var M,
T=fa+"-widget-header",ea=fa+"-widget-content",Z;M="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(Z=0;Z<N;Z++)M+="<th class='fc- "+T+"'/>";M+="</tr></thead><tbody>";for(Z=0;Z<i;Z++){M+="<tr class='fc-week"+Z+"'>";for(T=0;T<N;T++)M+="<td class='fc- "+ea+" fc-day"+(Z*N+T)+"'><div>"+(x?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";M+="</tr>"}M+="</tbody></table>";i=m(M).appendTo(a);
I=i.find("thead");l=I.find("th");q=i.find("tbody");P=q.find("tr");Q=q.find("td");B=Q.filter(":first-child");S=P.eq(0).find("div.fc-day-content div");bb(I.add(I.find("tr")));bb(P);P.eq(0).addClass("fc-first");v(Q);W=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}function o(i){var x=i||h==1,M=s.start.getMonth(),T=La(new Date),ea,Z,va;x&&l.each(function(wa,Ga){ea=m(Ga);Z=ba(wa);ea.html(za(Z,p));qb(ea,Z)});Q.each(function(wa,Ga){ea=m(Ga);Z=ba(wa);Z.getMonth()==M?ea.removeClass("fc-other-month"):
ea.addClass("fc-other-month");+Z==+T?ea.addClass(fa+"-state-highlight fc-today"):ea.removeClass(fa+"-state-highlight fc-today");ea.find("div.fc-day-number").text(Z.getDate());x&&qb(ea,Z)});P.each(function(wa,Ga){va=m(Ga);if(wa<h){va.show();wa==h-1?va.addClass("fc-last"):va.removeClass("fc-last")}else va.hide()})}function r(i){k=i;i=k-I.height();var x,M,T;if(G("weekMode")=="variable")x=M=Math.floor(i/(h==1?2:6));else{x=Math.floor(i/h);M=i-x*(h-1)}B.each(function(ea,Z){if(ea<h){T=m(Z);Za(T.find("> div"),
(ea==h-1?M:x)-Sa(T))}})}function w(i){V=i;K.clear();u=Math.floor(V/N);Va(l.slice(0,-1),u)}function v(i){i.click(J).mousedown(ta)}function J(i){if(!G("selectable")){var x=parseInt(this.className.match(/fc\-day(\d+)/)[1]);x=ba(x);c("dayClick",this,x,true,i)}}function L(i,x,M){M&&z.build();M=H(s.visStart);for(var T=aa(H(M),N),ea=0;ea<h;ea++){var Z=new Date(Math.max(M,i)),va=new Date(Math.min(T,x));if(Z<va){var wa;if(Y){wa=Ca(va,M)*X+$+1;Z=Ca(Z,M)*X+$+1}else{wa=Ca(Z,M);Z=Ca(va,M)}v(n(ea,wa,ea,Z-1))}aa(M,
7);aa(T,7)}}function n(i,x,M,T){i=z.rect(i,x,M,T,a);return E(i,a)}function t(i){return H(i)}function ca(i,x){L(i,aa(H(x),1),true)}function ha(){R()}function da(i,x,M){var T=ua(i);c("dayClick",Q[T.row*N+T.col],i,x,M)}function oa(i,x){F.start(function(M){R();M&&n(M.row,M.col,M.row,M.col)},x)}function ra(i,x,M){var T=F.stop();R();if(T){T=pa(T);c("drop",i,T,true,x,M)}}function ga(i){return H(i.start)}function ia(i){return K.left(i)}function qa(i){return K.right(i)}function ua(i){return{row:Math.floor(Ca(i,
s.visStart)/7),col:la(i.getDay())}}function pa(i){return U(i.row,i.col)}function U(i,x){return aa(H(s.visStart),i*7+x*X+$)}function ba(i){return U(Math.floor(i/N),i%N)}function la(i){return(i-Math.max(ja,ka)+N)%N*X+$}function ma(i){return P.eq(i)}function D(){return{left:0,right:V}}var s=this;s.renderBasic=d;s.setHeight=r;s.setWidth=w;s.renderDayOverlay=L;s.defaultSelectionEnd=t;s.renderSelection=ca;s.clearSelection=ha;s.reportDayClick=da;s.dragStart=oa;s.dragStop=ra;s.defaultEventEnd=ga;s.getHoverListener=
function(){return F};s.colContentLeft=ia;s.colContentRight=qa;s.dayOfWeekCol=la;s.dateCell=ua;s.cellDate=pa;s.cellIsAllDay=function(){return true};s.allDayRow=ma;s.allDayBounds=D;s.getRowCnt=function(){return h};s.getColCnt=function(){return N};s.getColWidth=function(){return u};s.getDaySegmentContainer=function(){return W};Jb.call(s,a,b,f);Kb.call(s);Lb.call(s);qc.call(s);var G=s.opt,c=s.trigger,A=s.clearEvents,E=s.renderOverlay,R=s.clearOverlays,ta=s.daySelectionMousedown,za=b.formatDate,I,l,q,
P,Q,B,S,W,V,k,u,h,N,z,F,K,Y,X,$,ja,ka,fa,p;pb(a.addClass("fc-grid"));z=new Mb(function(i,x){var M,T,ea;l.each(function(Z,va){M=m(va);T=M.offset().left;if(Z)ea[1]=T;ea=[T];x[Z]=ea});ea[1]=T+M.outerWidth();P.each(function(Z,va){if(Z<h){M=m(va);T=M.offset().top;if(Z)ea[1]=T;ea=[T];i[Z]=ea}});ea[1]=T+M.outerHeight()});F=new Nb(z);K=new Ob(function(i){return S.eq(i)})}function qc(){function a(U,ba){J(U);ua(f(U),ba)}function b(){L();da().empty()}function f(U){var ba=ia(),la=qa(),ma=H(e.visStart);la=aa(H(ma),
la);var D=m.map(U,Ua),s,G,c,A,E,R,ta=[];for(s=0;s<ba;s++){G=nb(mb(U,D,ma,la));for(c=0;c<G.length;c++){A=G[c];for(E=0;E<A.length;E++){R=A[E];R.row=s;R.level=c;ta.push(R)}}aa(ma,7);aa(la,7)}return ta}function d(U,ba,la){w(U)&&g(U,ba);la.isEnd&&v(U)&&pa(U,ba,la);n(U,ba)}function g(U,ba){var la=oa(),ma;ba.draggable({zIndex:9,delay:50,opacity:o("dragOpacity"),revertDuration:o("dragRevertDuration"),start:function(D,s){r("eventDragStart",ba,U,D,s);ca(U,ba);la.start(function(G,c,A,E){ba.draggable("option",
"revert",!G||!A&&!E);ga();if(G){ma=A*7+E*(o("isRTL")?-1:1);ra(aa(H(U.start),ma),aa(Ua(U),ma))}else ma=0},D,"drag")},stop:function(D,s){la.stop();ga();r("eventDragStop",ba,U,D,s);if(ma)ha(this,U,ma,0,U.allDay,D,s);else{ba.css("filter","");t(U,ba)}}})}var e=this;e.renderEvents=a;e.compileDaySegs=f;e.clearEvents=b;e.bindDaySeg=d;Pb.call(e);var o=e.opt,r=e.trigger,w=e.isEventDraggable,v=e.isEventResizable,J=e.reportEvents,L=e.reportEventClear,n=e.eventElementHandlers,t=e.showEvents,ca=e.hideEvents,ha=
e.eventDrop,da=e.getDaySegmentContainer,oa=e.getHoverListener,ra=e.renderDayOverlay,ga=e.clearOverlays,ia=e.getRowCnt,qa=e.getColCnt,ua=e.renderDaySegs,pa=e.resizableDayEvent}function rc(a,b){function f(v,J){J&&aa(v,J*7);v=aa(H(v),-((v.getDay()-o("firstDay")+7)%7));J=aa(H(v),7);var L=H(v),n=H(J),t=o("weekends");if(!t){Fa(L);Fa(n,-1,true)}e.title=w(L,aa(H(n),-1),o("titleFormat"));e.start=v;e.end=J;e.visStart=L;e.visEnd=n;r(t?7:5)}function d(){m("tbody").find(".active").css("background","transparent").removeClass("active")}
function g(v){var J=b.options.slotMinutes,L=(e.end-e.start)/(6E4*J);if(v){v=v.filter(function(oa){return oa.start<e.end&&oa.end>e.start});for(var n=0;n<v.length;n++){for(var t=v[n],ca="",ha=H(e.start),da=0;da<L;da++){if(ha>=t.start&&ha<t.end)ca+=".ts-"+ha.getDay()+Ka(ha,"-HH-mm")+", ";ya(ha,J)}m("tbody").find(ca).addClass("active").css("background",t.colour?t.colour:"white")}}}var e=this;e.render=f;e.renderSessions=g;e.clearSessions=d;Qb.call(e,a,b,"agendaWeek");var o=e.opt,r=e.renderAgenda,w=b.formatDates}
function sc(a,b){function f(r,w){if(w){aa(r,w);g("weekends")||Fa(r,w<0?-1:1)}w=H(r,true);var v=aa(H(w),1);d.title=o(r,g("titleFormat"));d.start=d.visStart=w;d.end=d.visEnd=v;e(1)}var d=this;d.render=f;Qb.call(d,a,b,"agendaDay");var g=d.opt,e=d.renderAgenda,o=b.formatDate}function Qb(a,b,f){function d(j){Aa=j;g();h?P():e();o()}function g(){sb=l("theme")?"ui":"fc";Rb=l("weekends")?0:1;Sb=l("firstDay");if(Tb=l("isRTL")){Ha=-1;Ia=Aa-1}else{Ha=1;Ia=0}Ma=lb(l("minTime"));cb=lb(l("maxTime"));Ub=l("columnFormat")}
function e(){var j=sb+"-widget-header",O=sb+"-widget-content",y,C,sa,xa,Ea,Da=l("slotMinutes")%15==0;y="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+j+"'>&nbsp;</th>";for(C=0;C<Aa;C++)y+="<th class='fc- fc-col"+C+" "+j+"'/>";y+="<th class='fc-agenda-gutter "+j+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+j+"'>&nbsp;</th>";for(C=0;C<Aa;C++)y+="<td class='fc- fc-col"+C+" "+O+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";
y+="<td class='fc-agenda-gutter "+O+"'>&nbsp;</td></tr></tbody></table>";h=m(y).appendTo(a);N=h.find("thead");z=N.find("th").slice(1,-1);F=h.find("tbody");K=F.find("td").slice(0,-1);Y=K.find("div.fc-day-content div");X=K.eq(0);$=X.find("> div");bb(N.add(N.find("tr")));bb(F.add(F.find("tr")));Z=N.find("th:first");va=h.find(".fc-agenda-gutter");ja=m("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);if(l("allDaySlot")){ka=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ja);
y="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+j+" fc-agenda-axis'>"+l("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+j+" fc-agenda-gutter'>&nbsp;</th></tr></table>";fa=m(y).appendTo(ja);p=fa.find("tr");n(p.find("td"));Z=Z.add(fa.find("th:first"));va=va.add(fa.find("th.fc-agenda-gutter"));ja.append("<div class='fc-agenda-divider "+j+"'><div class='fc-agenda-divider-inner'/></div>")}else ka=m([]);i=
m("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ja);x=m("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(i);M=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(x);y="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";sa=ab(u(new Date,"ddd MMM dd yyyy"));Ea=ya(H(sa),cb);ya(sa,Ma);for(C=tb=0;sa<Ea;C++){xa=sa.getMinutes();y+="<tr class='fc-slot"+C+" "+(!xa?"":"fc-minor")+"'><th class='fc-agenda-axis "+
j+"'>"+(!Da||!xa?u(sa,l("axisFormat")):"&nbsp;")+"</th><td class='"+O+"'>";for(xa=0;xa<Aa;xa++)y+="<div class='fc-session-slot fc-col"+xa+" ts-"+xa+"-"+u(sa,"HH-mm")+"'><div>"+u(sa,"HH:mm")+"</div></div>";y+="</td></tr>";ya(sa,l("slotMinutes"));tb++}y+="</tbody></table>";T=m(y).appendTo(x);ea=T.find("div:first");t(T.find("td"));Z=Z.add(T.find("th:first"))}function o(){var j,O,y,C;La(new Date);for(j=0;j<Aa;j++){C=ua(j);O=z.eq(j);O.html(u(C,Ub));y=K.eq(j);qb(O.add(y),C)}}function r(j,O){if(j===na)j=
Vb;Vb=j;ub={};var y=F.position().top,C=i.position().top;j=Math.min(j-y,T.height()+C+1);$.height(j-Sa(X));ja.css("top",y);i.height(j-C-1);Wa=ea.height()+1;O&&v()}function w(j){Ga=j;db.clear();Na=0;Va(Z.width("").each(function(O,y){Na=Math.max(Na,m(y).outerWidth())}),Na);j=i[0].clientWidth;if(vb=i.width()-j){Va(va,vb);va.show().prev().removeClass("fc-last")}else va.hide().prev().addClass("fc-last");Xa=Math.floor((j-Na)/Aa);Va(z.slice(0,-1),Xa);m(".fc-session-slot").width(Xa)}function v(){function j(){i.scrollTop(C)}
var O=dc(),y=H(O);y.setHours(l("firstHour"));var C=ba(O,y)+1;j();setTimeout(j,0)}function J(){Wb=i.scrollTop()}function L(){i.scrollTop(Wb)}function n(j){j.click(ca).mousedown(V)}function t(j){j.click(ca).mousedown(E)}function ca(j){if(!l("selectable")){var O=Math.min(Aa-1,Math.floor((j.pageX-h.offset().left-Na)/Xa)),y=ua(O),C=this.parentNode.className.match(/fc-slot(\d+)/);if(C){C=parseInt(C[1])*l("slotMinutes");var sa=Math.floor(C/60);y.setHours(sa);y.setMinutes(C%60+Ma);q("dayClick",K[O],y,false,
j)}else q("dayClick",K[O],y,true,j)}}function ha(j,O,y){y&&Oa.build();var C=H(I.visStart);if(Tb){y=Ca(O,C)*Ha+Ia+1;j=Ca(j,C)*Ha+Ia+1}else{y=Ca(j,C);j=Ca(O,C)}y=Math.max(0,y);j=Math.min(Aa,j);y<j&&n(da(0,y,0,j-1))}function da(j,O,y,C){j=Oa.rect(j,O,y,C,ja);return Q(j,ja)}function oa(j,O){for(var y=H(I.visStart),C=aa(H(y),1),sa=0;sa<Aa;sa++){var xa=new Date(Math.max(y,j)),Ea=new Date(Math.min(C,O));if(xa<Ea){var Da=sa*Ha+Ia;Da=Oa.rect(0,Da,0,Da,x);xa=ba(y,xa);Ea=ba(y,Ea);Da.top=xa;Da.height=Ea-xa;t(Q(Da,
x))}aa(y,1);aa(C,1)}}function ra(j){return db.left(j)}function ga(j){return db.right(j)}function ia(j){return{row:Math.floor(Ca(j,I.visStart)/7),col:U(j.getDay())}}function qa(j){var O=ua(j.col);j=j.row;l("allDaySlot")&&j--;j>=0&&ya(O,Ma+j*l("slotMinutes"));return O}function ua(j){return aa(H(I.visStart),j*Ha+Ia)}function pa(j){return l("allDaySlot")&&!j.row}function U(j){return(j-Math.max(Sb,Rb)+Aa)%Aa*Ha+Ia}function ba(j,O){j=H(j,true);if(O<ya(H(j),Ma))return 0;if(O>=ya(H(j),cb))return T.height();
j=l("slotMinutes");O=O.getHours()*60+O.getMinutes()-Ma;var y=Math.floor(O/j),C=ub[y];if(C===na)C=ub[y]=T.find("tr:eq("+y+") td div")[0].offsetTop;return Math.max(0,Math.round(C-1+Wa*(O%j/j)))}function la(){return{left:Na,right:Ga-vb}}function ma(){return p}function D(j){var O=H(j.start);if(j.allDay)return O;return ya(O,l("defaultEventMinutes"))}function s(j,O){if(O)return H(j);return ya(H(j),l("slotMinutes"))}function G(j,O,y){if(y)l("allDaySlot")&&ha(j,aa(H(O),1),true);else c(j,O)}function c(j,O){var y=
l("selectHelper");Oa.build();if(y){var C=Ca(j,I.visStart)*Ha+Ia;if(C>=0&&C<Aa){C=Oa.rect(0,C,0,C,x);var sa=ba(j,j),xa=ba(j,O);if(xa>sa){C.top=sa;C.height=xa-sa;C.left+=2;C.width-=5;if(m.isFunction(y)){if(j=y(j,O)){C.position="absolute";C.zIndex=8;wa=m(j).css(C).appendTo(x)}}else{C.isStart=true;C.isEnd=true;wa=m(k({title:"",start:j,end:O,className:["fc-select-helper"],editable:false},C));wa.css("opacity",l("dragOpacity"))}if(wa){t(wa);x.append(wa);Va(wa,C.width,true);Db(wa,C.height,true)}}}}else oa(j,
O)}function A(){B();if(wa){wa.remove();wa=null}}function E(j){if(j.which==1&&l("selectable")){W(j);var O;Ra.start(function(y,C){A();if(y&&y.col==C.col&&!pa(y)){C=qa(C);y=qa(y);O=[C,ya(H(C),l("slotMinutes")),y,ya(H(y),l("slotMinutes"))].sort(Fb);c(O[0],O[3])}else O=null},j);m(document).one("mouseup",function(y){Ra.stop();if(O){+O[0]==+O[1]&&R(O[0],false,y);S(O[0],O[3],false,y)}})}}function R(j,O,y){q("dayClick",K[U(j.getDay())],j,O,y)}function ta(j,O){Ra.start(function(y){B();if(y)if(pa(y))da(y.row,
y.col,y.row,y.col);else{y=qa(y);var C=ya(H(y),l("defaultEventMinutes"));oa(y,C)}},O)}function za(j,O,y){var C=Ra.stop();B();C&&q("drop",j,qa(C),pa(C),O,y)}var I=this;I.renderAgenda=d;I.setWidth=w;I.setHeight=r;I.beforeHide=J;I.afterShow=L;I.defaultEventEnd=D;I.timePosition=ba;I.dayOfWeekCol=U;I.dateCell=ia;I.cellDate=qa;I.cellIsAllDay=pa;I.allDayRow=ma;I.allDayBounds=la;I.getHoverListener=function(){return Ra};I.colContentLeft=ra;I.colContentRight=ga;I.getDaySegmentContainer=function(){return ka};
I.getSlotSegmentContainer=function(){return M};I.getMinMinute=function(){return Ma};I.getMaxMinute=function(){return cb};I.getBodyContent=function(){return x};I.getRowCnt=function(){return 1};I.getColCnt=function(){return Aa};I.getColWidth=function(){return Xa};I.getSlotHeight=function(){return Wa};I.defaultSelectionEnd=s;I.renderDayOverlay=ha;I.renderSelection=G;I.clearSelection=A;I.reportDayClick=R;I.dragStart=ta;I.dragStop=za;Jb.call(I,a,b,f);Kb.call(I);Lb.call(I);tc.call(I);var l=I.opt,q=I.trigger,
P=I.clearEvents,Q=I.renderOverlay,B=I.clearOverlays,S=I.reportSelection,W=I.unselect,V=I.daySelectionMousedown,k=I.slotSegHtml,u=b.formatDate,h,N,z,F,K,Y,X,$,ja,ka,fa,p,i,x,M,T,ea,Z,va,wa,Ga,Vb,Na,Xa,vb,Wa,Wb,Aa,tb,Oa,Ra,db,ub={},sb,Sb,Rb,Tb,Ha,Ia,Ma,cb,Ub;pb(a.addClass("fc-agenda"));Oa=new Mb(function(j,O){function y(eb){return Math.max(Da,Math.min(uc,eb))}var C,sa,xa;z.each(function(eb,vc){C=m(vc);sa=C.offset().left;if(eb)xa[1]=sa;xa=[sa];O[eb]=xa});xa[1]=sa+C.outerWidth();if(l("allDaySlot")){C=
p;sa=C.offset().top;j[0]=[sa,sa+C.outerHeight()]}for(var Ea=x.offset().top,Da=i.offset().top,uc=Da+i.outerHeight(),fb=0;fb<tb;fb++)j.push([y(Ea+Wa*fb),y(Ea+Wa*(fb+1))])});Ra=new Nb(Oa);db=new Ob(function(j){return Y.eq(j)})}function tc(){function a(k,u){ra(k);var h,N=k.length,z=[],F=[];for(h=0;h<N;h++)k[h].allDay?z.push(k[h]):F.push(k[h]);if(t("allDaySlot")){G(f(z),u);qa()}e(d(F),u)}function b(){ga();ua().empty();pa().empty()}function f(k){k=nb(mb(k,m.map(k,Ua),n.visStart,n.visEnd));var u,h=k.length,
N,z,F,K=[];for(u=0;u<h;u++){N=k[u];for(z=0;z<N.length;z++){F=N[z];F.row=0;F.level=u;K.push(F)}}return K}function d(k){var u=A(),h=la(),N=ba(),z=ya(H(n.visStart),h),F=m.map(k,g),K,Y,X,$,ja,ka,fa=[];for(K=0;K<u;K++){Y=nb(mb(k,F,z,ya(H(z),N-h)));wc(Y);for(X=0;X<Y.length;X++){$=Y[X];for(ja=0;ja<$.length;ja++){ka=$[ja];ka.col=K;ka.level=X;fa.push(ka)}}aa(z,1,true)}return fa}function g(k){return k.end?H(k.end):ya(H(k.start),t("defaultEventMinutes"))}function e(k,u){var h,N=k.length,z,F,K,Y,X,$,ja,ka,fa,
p="",i,x,M={},T={},ea=pa(),Z;h=A();if(i=t("isRTL")){x=-1;Z=h-1}else{x=1;Z=0}for(h=0;h<N;h++){z=k[h];F=z.event;K=ma(z.start,z.start);Y=ma(z.start,z.end);X=z.col;$=z.level;ja=z.forward||0;ka=D(X*x+Z);fa=s(X*x+Z)-ka;fa=Math.min(fa-6,fa*0.95);X=$?fa/($+ja+1):ja?(fa/(ja+1)-6)*2:fa;$=ka+fa/($+ja+1)*$*x+(i?fa-X:0);z.top=K;z.left=$;z.outerWidth=X;z.outerHeight=Y-K;p+=o(F,z)}ea[0].innerHTML=p;i=ea.children();for(h=0;h<N;h++){z=k[h];F=z.event;p=m(i[h]);x=ca("eventRender",F,F,p);if(x===false)p.remove();else{if(x&&
x!==true){p.remove();p=m(x).css({position:"absolute",top:z.top,left:z.left}).appendTo(ea)}z.element=p;if(F._id===u)w(F,p,z);else p[0]._fci=h;za(F,p)}}Cb(ea,k,w);for(h=0;h<N;h++){z=k[h];if(p=z.element){F=M[u=z.key=Hb(p[0])];z.vsides=F===na?(M[u]=Sa(p,true)):F;F=T[u];z.hsides=F===na?(T[u]=ob(p,true)):F;u=p.find("div.fc-event-content");if(u.length)z.contentTop=u[0].offsetTop}}for(h=0;h<N;h++){z=k[h];if(p=z.element){p[0].style.width=Math.max(0,z.outerWidth-z.hsides)+"px";M=Math.max(0,z.outerHeight-z.vsides);
p[0].style.height=M+"px";F=z.event;if(z.contentTop!==na&&M-z.contentTop<10){p.find("div.fc-event-time").text(W(F.start,t("timeFormat"))+" - "+F.title);p.find("div.fc-event-title").remove()}ca("eventAfterRender",F,F,p)}}}function o(k,u){var h="<",N=k.url,z=Ib(k,t),F=z?" style='"+z+"'":"",K=["fc-event","fc-event-skin","fc-event-vert"];ha(k)&&K.push("fc-event-draggable");u.isStart&&K.push("fc-corner-top");u.isEnd&&K.push("fc-corner-bottom");K=K.concat(k.className);if(k.source)K=K.concat(k.source.className||
[]);h+=N?"a href='"+Qa(k.url)+"'":"div";h+=" class='"+K.join(" ")+"' style='position:absolute;z-index:8;top:"+u.top+"px;left:"+u.left+"px;"+z+"'><div class='fc-event-inner fc-event-skin'"+F+"><div class='fc-event-head fc-event-skin'"+F+"><div class='fc-event-time'>"+Qa(V(k.start,k.end,t("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+Qa(k.title)+"</div></div><div class='fc-event-bg'></div></div>";if(u.isEnd&&da(k))h+="<div class='ui-resizable-handle ui-resizable-s'>=</div>";
h+="</"+(N?"a":"div")+">";return h}function r(k,u,h){ha(k)&&v(k,u,h.isStart);h.isEnd&&da(k)&&c(k,u,h);ia(k,u)}function w(k,u,h){var N=u.find("div.fc-event-time");ha(k)&&J(k,u,N);h.isEnd&&da(k)&&L(k,u,N);ia(k,u)}function v(k,u,h){function N(){if(!K){u.width(z).height("").draggable("option","grid",null);K=true}}var z,F,K=true,Y,X=t("isRTL")?-1:1,$=U(),ja=E(),ka=R(),fa=la();u.draggable({zIndex:9,opacity:t("dragOpacity","month"),revertDuration:t("dragRevertDuration"),start:function(p,i){ca("eventDragStart",
u,k,p,i);l(k,u);z=u.width();$.start(function(x,M,T,ea){B();if(x){F=false;Y=ea*X;if(x.row)if(h){if(K){u.width(ja-10);Db(u,ka*Math.round((k.end?(k.end-k.start)/xc:t("defaultEventMinutes"))/t("slotMinutes")));u.draggable("option","grid",[ja,1]);K=false}}else F=true;else{Q(aa(H(k.start),Y),aa(Ua(k),Y));N()}F=F||K&&!Y}else{N();F=true}u.draggable("option","revert",F)},p,"drag")},stop:function(p,i){$.stop();B();ca("eventDragStop",u,k,p,i);if(F){N();u.css("filter","");I(k,u)}else{var x=0;K||(x=Math.round((u.offset().top-
ta().offset().top)/ka)*t("slotMinutes")+fa-(k.start.getHours()*60+k.start.getMinutes()));q(this,k,Y,x,K,p,i)}}})}function J(k,u,h){function N(x){var M=ya(H(k.start),x),T;if(k.end)T=ya(H(k.end),x);h.text(V(M,T,t("timeFormat")))}function z(){if(K){h.css("display","");u.draggable("option","grid",[p,i]);K=false}}var F,K=false,Y,X,$,ja=t("isRTL")?-1:1,ka=U(),fa=A(),p=E(),i=R();u.draggable({zIndex:9,scroll:false,grid:[p,i],axis:fa==1?"y":false,opacity:t("dragOpacity"),revertDuration:t("dragRevertDuration"),
start:function(x,M){ca("eventDragStart",u,k,x,M);l(k,u);F=u.position();X=$=0;ka.start(function(T,ea,Z,va){u.draggable("option","revert",!T);B();if(T){Y=va*ja;if(t("allDaySlot")&&!T.row){if(!K){K=true;h.hide();u.draggable("option","grid",null)}Q(aa(H(k.start),Y),aa(Ua(k),Y))}else z()}},x,"drag")},drag:function(x,M){X=Math.round((M.position.top-F.top)/i)*t("slotMinutes");if(X!=$){K||N(X);$=X}},stop:function(x,M){var T=ka.stop();B();ca("eventDragStop",u,k,x,M);if(T&&(Y||X||K))q(this,k,Y,K?0:X,K,x,M);
else{z();u.css("filter","");u.css(F);N(0);I(k,u)}}})}function L(k,u,h){var N,z,F=R();u.resizable({handles:{s:"div.ui-resizable-s"},grid:F,start:function(K,Y){N=z=0;l(k,u);u.css("z-index",9);ca("eventResizeStart",this,k,K,Y)},resize:function(K,Y){N=Math.round((Math.max(F,u.height())-Y.originalSize.height)/F);if(N!=z){h.text(V(k.start,!N&&!k.end?null:ya(oa(k),t("slotMinutes")*N),t("timeFormat")));z=N}},stop:function(K,Y){ca("eventResizeStop",this,k,K,Y);if(N)P(this,k,0,t("slotMinutes")*N,K,Y);else{u.css("z-index",
8);I(k,u)}}})}var n=this;n.renderEvents=a;n.compileDaySegs=f;n.clearEvents=b;n.slotSegHtml=o;n.bindDaySeg=r;Pb.call(n);var t=n.opt,ca=n.trigger,ha=n.isEventDraggable,da=n.isEventResizable,oa=n.eventEnd,ra=n.reportEvents,ga=n.reportEventClear,ia=n.eventElementHandlers,qa=n.setHeight,ua=n.getDaySegmentContainer,pa=n.getSlotSegmentContainer,U=n.getHoverListener,ba=n.getMaxMinute,la=n.getMinMinute,ma=n.timePosition,D=n.colContentLeft,s=n.colContentRight,G=n.renderDaySegs,c=n.resizableDayEvent,A=n.getColCnt,
E=n.getColWidth,R=n.getSlotHeight,ta=n.getBodyContent,za=n.reportEventElement,I=n.showEvents,l=n.hideEvents,q=n.eventDrop,P=n.eventResize,Q=n.renderDayOverlay,B=n.clearOverlays,S=n.calendar,W=S.formatDate,V=S.formatDates}function wc(a){var b,f,d,g,e,o;for(b=a.length-1;b>0;b--){g=a[b];for(f=0;f<g.length;f++){e=g[f];for(d=0;d<a[b-1].length;d++){o=a[b-1][d];if(Bb(e,o))o.forward=Math.max(o.forward||0,(e.forward||0)+1)}}}}function Jb(a,b,f){function d(D,s){D=ma[D];if(typeof D=="object")return jb(D,s||
f);return D}function g(D,s){return b.trigger.apply(b,[D,s||ia].concat(Array.prototype.slice.call(arguments,2),[ia]))}function e(D){return r(D)&&!d("disableDragging")}function o(D){return r(D)&&!d("disableResizing")}function r(D){return Ta(D.editable,(D.source||{}).editable,d("editable"))}function w(D){U={};var s,G=D.length,c;for(s=0;s<G;s++){c=D[s];if(U[c._id])U[c._id].push(c);else U[c._id]=[c]}}function v(D){return D.end?H(D.end):qa(D)}function J(D,s){ba.push(s);if(la[D._id])la[D._id].push(s);else la[D._id]=
[s]}function L(){ba=[];la={}}function n(D,s){s.click(function(G){if(!s.hasClass("ui-draggable-dragging")&&!s.hasClass("ui-resizable-resizing"))return g("eventClick",this,D,G)}).hover(function(G){g("eventMouseover",this,D,G)},function(G){g("eventMouseout",this,D,G)})}function t(D,s){ha(D,s,"show")}function ca(D,s){ha(D,s,"hide")}function ha(D,s,G){D=la[D._id];var c,A=D.length;for(c=0;c<A;c++)if(!s||D[c][0]!=s[0])D[c][G]()}function da(D,s,G,c,A,E,R){var ta=s.allDay,za=s._id;ra(U[za],G,c,A);g("eventDrop",
D,s,G,c,A,function(){ra(U[za],-G,-c,ta);pa(za)},E,R);pa(za)}function oa(D,s,G,c,A,E){var R=s._id;ga(U[R],G,c);g("eventResize",D,s,G,c,function(){ga(U[R],-G,-c);pa(R)},A,E);pa(R)}function ra(D,s,G,c){G=G||0;for(var A,E=D.length,R=0;R<E;R++){A=D[R];if(c!==na)A.allDay=c;ya(aa(A.start,s,true),G);if(A.end)A.end=ya(aa(A.end,s,true),G);ua(A,ma)}}function ga(D,s,G){G=G||0;for(var c,A=D.length,E=0;E<A;E++){c=D[E];c.end=ya(aa(v(c),s,true),G);ua(c,ma)}}var ia=this;ia.element=a;ia.calendar=b;ia.name=f;ia.opt=
d;ia.trigger=g;ia.isEventDraggable=e;ia.isEventResizable=o;ia.reportEvents=w;ia.eventEnd=v;ia.reportEventElement=J;ia.reportEventClear=L;ia.eventElementHandlers=n;ia.showEvents=t;ia.hideEvents=ca;ia.eventDrop=da;ia.eventResize=oa;var qa=ia.defaultEventEnd,ua=b.normalizeEvent,pa=b.reportEventChange,U={},ba=[],la={},ma=b.options}function Pb(){function a(l,q){var P=A(),Q=pa(),B=U(),S=0,W,V,k=l.length,u,h;P[0].innerHTML=f(l);d(l,P.children());g(l);e(l,P,q);o(l);r(l);w(l);q=v();for(P=0;P<Q;P++){W=[];for(V=
0;V<B;V++)W[V]=0;for(;S<k&&(u=l[S]).row==P;){V=Gb(W.slice(u.startCol,u.endCol));u.top=V;V+=u.outerHeight;for(h=u.startCol;h<u.endCol;h++)W[h]=V;S++}q[P].height(Gb(W))}L(l,J(q))}function b(l,q,P){var Q=m("<div/>"),B=A(),S=l.length,W;Q[0].innerHTML=f(l);Q=Q.children();B.append(Q);d(l,Q);o(l);r(l);w(l);L(l,J(v()));Q=[];for(B=0;B<S;B++)if(W=l[B].element){l[B].row===q&&W.css("top",P);Q.push(W[0])}return m(Q)}function f(l){var q=ca("isRTL"),P,Q=l.length,B,S,W,V;P=la();var k=P.left,u=P.right,h,N,z,F,K,Y=
"";for(P=0;P<Q;P++){B=l[P];S=B.event;V=["fc-event","fc-event-skin","fc-event-hori"];da(S)&&V.push("fc-event-draggable");if(q){B.isStart&&V.push("fc-corner-right");B.isEnd&&V.push("fc-corner-left");h=s(B.end.getDay()-1);N=s(B.start.getDay());z=B.isEnd?ma(h):k;F=B.isStart?D(N):u}else{B.isStart&&V.push("fc-corner-left");B.isEnd&&V.push("fc-corner-right");h=s(B.start.getDay());N=s(B.end.getDay()-1);z=B.isStart?ma(h):k;F=B.isEnd?D(N):u}V=V.concat(S.className);if(S.source)V=V.concat(S.source.className||
[]);W=S.url;K=Ib(S,ca);Y+=W?"<a href='"+Qa(W)+"'":"<div";Y+=" class='"+V.join(" ")+"' style='position:absolute;z-index:8;left:"+z+"px;"+K+"'><div class='fc-event-inner fc-event-skin'"+(K?" style='"+K+"'":"")+">";if(!S.allDay&&B.isStart)Y+="<span class='fc-event-time'>"+Qa(R(S.start,S.end,ca("timeFormat")))+"</span>";Y+="<span class='fc-event-title'>"+Qa(S.title)+"</span></div>";if(B.isEnd&&oa(S))Y+="<div class='ui-resizable-handle ui-resizable-"+(q?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>";Y+="</"+(W?
"a":"div")+">";B.left=z;B.outerWidth=F-z;B.startCol=h;B.endCol=N+1}return Y}function d(l,q){var P,Q=l.length,B,S,W;for(P=0;P<Q;P++){B=l[P];S=B.event;W=m(q[P]);S=ha("eventRender",S,S,W);if(S===false)W.remove();else{if(S&&S!==true){S=m(S).css({position:"absolute",left:B.left});W.replaceWith(S);W=S}B.element=W}}}function g(l){var q,P=l.length,Q,B;for(q=0;q<P;q++){Q=l[q];(B=Q.element)&&ga(Q.event,B)}}function e(l,q,P){var Q,B=l.length,S,W,V;for(Q=0;Q<B;Q++){S=l[Q];if(W=S.element){V=S.event;if(V._id===
P)E(V,W,S);else W[0]._fci=Q}}Cb(q,l,E)}function o(l){var q,P=l.length,Q,B,S,W,V={};for(q=0;q<P;q++){Q=l[q];if(B=Q.element){S=Q.key=Hb(B[0]);W=V[S];if(W===na)W=V[S]=ob(B,true);Q.hsides=W}}}function r(l){var q,P=l.length,Q,B;for(q=0;q<P;q++){Q=l[q];if(B=Q.element)B[0].style.width=Math.max(0,Q.outerWidth-Q.hsides)+"px"}}function w(l){var q,P=l.length,Q,B,S,W,V={};for(q=0;q<P;q++){Q=l[q];if(B=Q.element){S=Q.key;W=V[S];if(W===na)W=V[S]=Eb(B);Q.outerHeight=B[0].offsetHeight+W}}}function v(){var l,q=pa(),
P=[];for(l=0;l<q;l++)P[l]=ba(l).find("td:first div.fc-day-content > div");return P}function J(l){var q,P=l.length,Q=[];for(q=0;q<P;q++)Q[q]=l[q][0].offsetTop;return Q}function L(l,q){var P,Q=l.length,B,S;for(P=0;P<Q;P++){B=l[P];if(S=B.element){S[0].style.top=q[B.row]+(B.top||0)+"px";B=B.event;ha("eventAfterRender",B,B,S)}}}function n(l,q,P){var Q=ca("isRTL"),B=Q?"w":"e",S=q.find("div.ui-resizable-"+B),W=false;pb(q);q.mousedown(function(V){V.preventDefault()}).click(function(V){if(W){V.preventDefault();
V.stopImmediatePropagation()}});S.mousedown(function(V){function k(ka){ha("eventResizeStop",this,l,ka);m("body").css("cursor","");u.stop();za();Y&&ua(this,l,Y,0,ka);setTimeout(function(){W=false},0)}if(V.which==1){W=true;var u=t.getHoverListener(),h=pa(),N=U(),z=Q?-1:1,F=Q?N-1:0,K=q.css("top"),Y,X,$=m.extend({},l),ja=G(l.start);I();m("body").css("cursor",B+"-resize").one("mouseup",k);ha("eventResizeStart",this,l,V);u.start(function(ka,fa){if(ka){var p=Math.max(ja.row,ka.row);ka=ka.col;if(h==1)p=0;
if(p==ja.row)ka=Q?Math.min(ja.col,ka):Math.max(ja.col,ka);Y=p*7+ka*z+F-(fa.row*7+fa.col*z+F);fa=aa(ra(l),Y,true);if(Y){$.end=fa;p=X;X=b(c([$]),P.row,K);X.find("*").css("cursor",B+"-resize");p&&p.remove();qa(l)}else if(X){ia(l);X.remove();X=null}za();ta(l.start,aa(H(fa),1))}},V)}})}var t=this;t.renderDaySegs=a;t.resizableDayEvent=n;var ca=t.opt,ha=t.trigger,da=t.isEventDraggable,oa=t.isEventResizable,ra=t.eventEnd,ga=t.reportEventElement,ia=t.showEvents,qa=t.hideEvents,ua=t.eventResize,pa=t.getRowCnt,
U=t.getColCnt,ba=t.allDayRow,la=t.allDayBounds,ma=t.colContentLeft,D=t.colContentRight,s=t.dayOfWeekCol,G=t.dateCell,c=t.compileDaySegs,A=t.getDaySegmentContainer,E=t.bindDaySeg,R=t.calendar.formatDates,ta=t.renderDayOverlay,za=t.clearOverlays,I=t.clearSelection}function Lb(){function a(L,n,t){b();n||(n=r(L,t));w(L,n,t);f(L,n,t)}function b(L){if(J){J=false;v();o("unselect",null,L)}}function f(L,n,t,ca){J=true;o("select",null,L,n,t,ca)}function d(L){var n=g.cellDate,t=g.cellIsAllDay,ca=g.getHoverListener(),
ha=g.reportDayClick;if(L.which==1&&e("selectable")){b(L);var da;ca.start(function(oa,ra){v();if(oa&&t(oa)){da=[n(ra),n(oa)].sort(Fb);w(da[0],da[1],true)}else da=null},L);m(document).one("mouseup",function(oa){ca.stop();if(da){+da[0]==+da[1]&&ha(da[0],true,oa);f(da[0],da[1],true,oa)}})}}var g=this;g.select=a;g.unselect=b;g.reportSelection=f;g.daySelectionMousedown=d;var e=g.opt,o=g.trigger,r=g.defaultSelectionEnd,w=g.renderSelection,v=g.clearSelection,J=false;e("selectable")&&e("unselectAuto")&&m(document).mousedown(function(L){var n=
e("unselectCancel");if(n)if(m(L.target).parents(n).length)return;b(L)})}function Kb(){function a(e,o){var r=g.shift();r||(r=m("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));r[0].parentNode!=o[0]&&r.appendTo(o);d.push(r.css(e).show());return r}function b(){for(var e;e=d.shift();)g.push(e.hide().unbind())}var f=this;f.renderOverlay=a;f.clearOverlays=b;var d=[],g=[]}function Mb(a){var b=this,f,d;b.build=function(){f=[];d=[];a(f,d)};b.cell=function(g,e){var o=f.length,r=d.length,
w,v=-1,J=-1;for(w=0;w<o;w++)if(e>=f[w][0]&&e<f[w][1]){v=w;break}for(w=0;w<r;w++)if(g>=d[w][0]&&g<d[w][1]){J=w;break}return v>=0&&J>=0?{row:v,col:J}:null};b.rect=function(g,e,o,r,w){w=w.offset();return{top:f[g][0]-w.top,left:d[e][0]-w.left,width:d[r][1]-d[e][0],height:f[o][1]-f[g][0]}}}function Nb(a){function b(r){yc(r);r=a.cell(r.pageX,r.pageY);if(!r!=!o||r&&(r.row!=o.row||r.col!=o.col)){if(r){e||(e=r);g(r,e,r.row-e.row,r.col-e.col)}else g(r,e);o=r}}var f=this,d,g,e,o;f.start=function(r,w,v){g=r;
e=o=null;a.build();b(w);d=v||"mousemove";m(document).bind(d,b)};f.stop=function(){m(document).unbind(d,b);return o}}function yc(a){if(a.pageX===na){a.pageX=a.originalEvent.pageX;a.pageY=a.originalEvent.pageY}}function Ob(a){function b(o){return d[o]=d[o]||a(o)}var f=this,d={},g={},e={};f.left=function(o){return g[o]=g[o]===na?b(o).position().left:g[o]};f.right=function(o){return e[o]=e[o]===na?f.left(o)+b(o).width():e[o]};f.clear=function(){d={};g={};e={}}}var Ya={defaultView:"month",aspectRatio:1.35,
header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan",
"Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},zc=
{header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ba=m.fullCalendar={version:"1.5.4"},Ja=Ba.views={};m.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),f;this.each(function(){var g=m.data(this,"fullCalendar");if(g&&m.isFunction(g[a])){g=g[a].apply(g,
b);if(f===na)f=g;a=="destroy"&&m.removeData(this,"fullCalendar")}});if(f!==na)return f;return this}var d=a.eventSources||[];delete a.eventSources;if(a.events){d.push(a.events);delete a.events}a=m.extend(true,{},Ya,a.isRTL||a.isRTL===na&&Ya.isRTL?zc:{},a);this.each(function(g,e){g=m(e);e=new Xb(g,a,d);g.data("fullCalendar",e);e.render()});return this};Ba.sourceNormalizers=[];Ba.sourceFetchers=[];var ac={dataType:"json",cache:false},bc=1;Ba.addDays=aa;Ba.cloneDate=H;Ba.parseDate=ab;Ba.parseISO8601=
Ab;Ba.parseTime=lb;Ba.formatDate=Ka;Ba.formatDates=ib;var mc=["sun","mon","tue","wed","thu","fri","sat"],zb=864E5,cc=36E5,xc=6E4,ec={s:function(a){return a.getSeconds()},ss:function(a){return Pa(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Pa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Pa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Pa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Pa(a.getDate())},
ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Pa(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<
12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Ka(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"}};Ba.applyAll=$a;Ja.month=nc;Ja.basicWeek=oc;Ja.basicDay=pc;wb({weekMode:"fixed"});Ja.agendaWeek=rc;Ja.agendaDay=sc;wb({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,
maxTime:24})})(jQuery);
